<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Home</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars2.githubusercontent.com/u/29355828?s=400&u=8a4658d2d5d4b601e9246f9c77d61cd80b78d848&v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">Laurent Brusa</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://goo.gl/maps/Ciy1Bxq9EA9JiUgs9"><i class="fas fa-map-marker-alt l-box"></i><a class="social-media" href="https://goo.gl/maps/Ciy1Bxq9EA9JiUgs9">Berlin, Germany</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/multitudes/portfolio/blob/master/README.md"><i class="fas fa-pepper-hot l-box"></i><a class="social-media" href="https://github.com/multitudes/portfolio/blob/master/README.md">Portfolio</a></a></div><div class="pure-u-md-1-1"><a href="https://www.linkedin.com/in/laurentbrusa"><i class="fab fa-linkedin l-box"></i><a class="social-media" href="https://www.linkedin.com/in/laurentbrusa">LinkedIn</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/multitudes"><i class="fab fa-github-square l-box"></i><a class="social-media" href="https://github.com/multitudes">GitHub</a></a></div><div class="pure-u-md-1-1"><a href="https://twitter.com/wrmultitudes"><i class="fab fa-twitter-square l-box"></i><a class="social-media" href="https://twitter.com/wrmultitudes">Twitter</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/Regular Expressions Primer">Regular Expressions Primer</a></h2><p class="post-meta">17 January 2019</p><div class="post-tags"><a class="post-category post-category-regex" href="/tags/regex">regex</a><a class="post-category post-category-ios" href="/tags/ios">iOS</a><a class="post-category post-category-developer" href="/tags/developer">developer</a><a class="post-category post-category-tutorial" href="/tags/tutorial">tutorial</a></div><div class="post-description"><div><h2>Introduction</h2><p>Many people use different names to refer to Regular Expressions, such as Regexp, Regex, ASCII puke(!).</p><p>Regex are a way to express a set of strings. They can be used to 'scrub' website to extract links, informations, titles.. They are just simply a series of codes that you use to define exactly what text you are looking for. And text can be numbers letters punctuation etc.</p><p>This code is used to match patterns. lets see an example. I want to find all numbers, one to five digit long followed by a space and the words "Hello World".</p><p>For example: <code>12345 Hello World.</code> would be defined by <code>\d{1,5}\s\w+\s\w+\.</code></p><p>We define the pattern with the following syntax. The slash is delimiting the start of a regular expression.</p><p><code>\d{1,5}</code></p><p>So this means: A digit between 1 to 5 digits in length, whenever you use these curly brackets, you are saying that you expect between n to m digits</p><p>Then I see in our example, the numbers are followed by a space. The Regular expression for a space is</p><p><code>\s</code></p><p>After this you expect a series of character which will be from one to multiple letters in length. This <code>w</code> represents anything which is a character, and the <code>+</code> means one or more.</p><p><code>\w+</code></p><p>again followed by space and a word</p><p><code>\s\w+</code></p><p>then the point. The point can be interpreted in regex to mean any character except a newline. So I need to put a backslash.</p><p><code>\.</code></p><p>We now put all this together:</p><p><code>\d{1,5}\s\w+\s\w+\.</code></p><p>Nice isn't it?</p><h4>A bit of theory</h4><p>These are the common used parameters:</p><p><code>\d</code> is any number (digit)</p><p><code>\D</code> with the capital D is anything but a number (digit)</p><p><code>\s</code> A space</p><p><code>\S</code> Anything but a space</p><p><code>\w</code> Any character</p><p><code>\W</code> Anything but a character</p><p><code>.</code> matches any character except a line break</p><p><code>\b</code> match for a space which precedes or follows a whole word</p><p><code>?</code> zero or one repetition of the code which precedes it</p><p><code>*</code> One or more repetition</p><p><code>{n}</code> If you know exactly how many repetitions, insert the amount in curly brackets</p><p><code>{m,n}</code> Here means m to n repetitions as seen above</p><p><code>\e </code> escaped whitespace</p><p><code>\f </code> form feed</p><p><code>\n</code> newline</p><p><code>\r</code> carriage return</p><p><code>\t </code> horizontal tab</p><p>Using curly brackets to find commonly mispelled words. For example, tomorrow can be mispelled as tommorow, tommorrow..</p><p>We can find them in this way:</p><p><code>\tomm{0,1}orr{0,1}ow</code></p><p><code>[a-z] </code> any lower case letter</p><p><code>[A-Z]</code> any upper case letter</p><p><code>[0-9]</code> any number</p><p><code>[a-cC-R3-4]</code> any letter from a to c or uppercase letter from C to R or number from 3-4</p><h4>An example</h4><p>Lets look for the name Catherine in our text. But we want to find her last name as well.</p><p>We will use the OR operator <code>|</code> because we want to find the name but also the shorter verions of her name such of Cath or Cathy, followed by a trailing space and another word of one of more characters:</p><p><code>\Cat(herine|h)\b\w+\b</code></p><p>This is the same as</p><p><code>\(Catherine|Cath)\b\w+\b</code></p><p>if I add <code>\1</code> at the end, it means take what it is in the parentheses and redo it again</p><p><code>\(Catherine|Cath)\b\w+\b\1</code> same as <code>\(Catherine|Cath)\b\w+\b\(Catherine|Cath)</code></p><p>The caret <code>^</code> means at the beginning of the text. So to find all sentences starting with <code>Dog</code></p><p><code>(^Dog\s.+$)</code><br><br>This will find all lines starting with dog followed by a space and any or more chars (but no newline) and ending ($).</p><h2>Regex with Python</h2><p>So now we apply what we have learned to use it in python</p><pre><code>

# <span class="keyword">import</span> our regex library
<span class="keyword">import</span> re
# lets take a random text
# <span class="keyword">if</span> we have a file we can use <span class="call">open</span>('filename.<span class="property">txt</span>')
text = <span class="string">"aAsdfgh$%#n Cat iuhi"</span>
# define our regular expression <span class="keyword">in</span> the function compile
expression = re.<span class="call">compile</span>('<span class="type">Cat</span>')
# tell python to look <span class="keyword">for</span> it
pattern = re.<span class="call">search</span>(expression, text)
# print the result using the group function
<span class="call">print</span>(pattern.<span class="call">group</span>())

# <span class="type">To</span> find all occurrences there <span class="keyword">is</span> the method findall
# lets print all the letters and only the letters <span class="keyword">in</span> our text:

strToSearch = <span class="string">""</span>

<span class="keyword">for</span> line <span class="keyword">in</span> text:
    strToSearch += text
    
<span class="call">print</span>(strToSearch)    

expression = re.<span class="call">compile</span>('[a-z]',re.<span class="type">IGNORECASE</span>)
pattern2 = re.<span class="call">findall</span>(expression,text)

<span class="keyword">for</span> i <span class="keyword">in</span> pattern2:
    <span class="call">print</span>(i,end='')
</code></pre><h2>Example from fastai DL course v3</h2><p>Lets see this example as seen on fastai deep learning for coders version 3. We have a set of image files in a folder with names like</p><p>'data/oxford-iiit-pet/images/american<em>bulldog</em>146.jpg'</p><p>The label for that particular picture is in the name of the file. Lets see how we can extract it with a regex pattern:</p><p><code>/([^/]+)_\d+.jpg$</code></p><p><code>/</code> starts the regex</p><p><code>()</code> in the parentheses is what we are looking for, a greoup of characters defined as:</p><p><code>[^/]+</code> the <code>^</code> is a negation, so it says no forward slash and <code>+</code> arbitrarily long so <code>([^/]+)</code> is looking for a group of characters that do not contain forward slashes and are arbitrarily long.</p><p><code>_</code> it is literally expecting an underscore character here</p><p>The RegEx <code>\d</code> refers to numerical digits and the plus <code>+</code> sign that comes after it means that there may be arbitrarily many digits. This looks for the numerical ID of the images.</p><p><code>.jpg$</code> The dollar sign at the end tells that we are matching only files which end with <code>.jpg</code></p><p>The python code to extract the name would be:</p><pre><code><span class="keyword">import</span> re

string = 'data/oxford-iiit-pet/images/american_bulldog_146.<span class="property">jpg</span>'

pat = r'([^/]+)<span class="keyword">_</span>\d+.jpg$'

pat = re.<span class="call">compile</span>(pat)

<span class="call">print</span>(pat.<span class="call">search</span>(string).<span class="call">group</span>(<span class="number">1</span>))

# we <span class="keyword">get</span> this result and not the whole string, 
# because on the previous expression, we requested 'group <span class="number">1</span>' which <span class="keyword">is</span> 
# that part of the regex with the parentheses
&gt;american_bulldog

</code></pre><h2>Regex in HTML5</h2><p>Regex can be used in HTML5 for form validation with the pattern attribute.</p><pre><code>&lt;input name=<span class="string">"zip"</span> pattern=<span class="string">"\d{5}"</span> /&gt; 
</code></pre><h2>In the command line</h2><p><code>cd</code> to the folder where you are looking for a specific file. Suppose you are looking for all files like with a name like aaa_431x303.jpg We can use find with -regex and the pattern to fild them:</p><pre><code>find -<span class="type">E</span> . -regex '.*[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">2</span>,<span class="number">4</span>}x[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">2</span>,<span class="number">4</span>}\.<span class="property">jpg</span>'
</code></pre><h2>Resources</h2><ul><li>The excellent <a href="https://leaverou.github.io/regexplained/">Regex Playground</a> of Lea Verou</li><li>Tutorials at <a href="https://regexr.com/">RegExr</a></li><li>The Video tutorials <a href="https://www.youtube.com/watch?v=DRR9fOXkfRE&feature=youtu.be">Understanding Regular Expressions (12 minute video)</a></li></ul></div></div></div><div class="footer pure-u-1"><div class="pure-u-1">© 2020 Laurent Brusa</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a>. Written in Swift</div><div class="pure-u-1"><a href="/feed.rss">RSS feed</a></div></div></div></body></html>